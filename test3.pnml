<?xml version="1.0" encoding="UTF-8"?>
<pnml xmlns="http://www.pnml.org/version-2009/grammar/pnml">
  <net id="deadlock_xl" type="http://www.pnml.org/version-2009/grammar/ptnet">

    <!-- 24 PLACES -->
    <place id="p1"><name><text>P1</text></name><initialMarking><text>1</text></initialMarking></place>
    <place id="p2"><name><text>P2</text></name></place>
    <place id="p3"><name><text>P3</text></name><initialMarking><text>1</text></initialMarking></place>
    <place id="p4"><name><text>P4</text></name></place>
    <place id="p5"><name><text>P5</text></name><initialMarking><text>1</text></initialMarking></place>
    <place id="p6"><name><text>P6</text></name><initialMarking><text>1</text></initialMarking></place>
    <place id="p7"><name><text>P7</text></name><initialMarking><text>1</text></initialMarking></place>
    <place id="p8"><name><text>P8</text></name></place>
    <place id="p9"><name><text>P9</text></name><initialMarking><text>1</text></initialMarking></place>

    <place id="p10"><name><text>P10</text></name></place>
    <place id="p11"><name><text>P11</text></name></place>
    <place id="p12"><name><text>P12</text></name></place>
    <place id="p13"><name><text>P13</text></name><initialMarking><text>1</text></initialMarking></place>
    <place id="p14"><name><text>P14</text></name></place>
    <place id="p15"><name><text>P15</text></name></place>
    <place id="p16"><name><text>P16</text></name></place>
    <place id="p17"><name><text>P17</text></name></place>
    <place id="p18"><name><text>P18</text></name></place>

    <place id="p19"><name><text>P19</text></name></place>
    <place id="p20"><name><text>P20</text></name></place>
    <place id="p21"><name><text>P21</text></name></place>
    <place id="p22"><name><text>P22</text></name></place>
    <place id="p23"><name><text>P23</text></name></place>

    <!-- Deadlock place -->
    <place id="p_dead"><name><text>P_DEAD</text></name></place>

    <!-- 18 TRANSITIONS -->
    <transition id="t1"/><transition id="t2"/><transition id="t3"/>
    <transition id="t4"/><transition id="t5"/><transition id="t6"/>
    <transition id="t7"/><transition id="t8"/><transition id="t9"/>
    <transition id="t10"/><transition id="t11"/><transition id="t12"/>
    <transition id="t13"/><transition id="t14"/><transition id="t15"/>
    <transition id="t16"/><transition id="t17"/>
    <transition id="t_dead"/>

    <!-- MAIN LOOP (4-stage cycle) -->
    <arc id="a1" source="p1" target="t1"/>
    <arc id="a2" source="t1" target="p2"/>

    <arc id="a3" source="p2" target="t2"/>
    <arc id="a4" source="t2" target="p3"/>

    <arc id="a5" source="p3" target="t3"/>
    <arc id="a6" source="t3" target="p4"/>

    <arc id="a7" source="p4" target="t4"/>
    <arc id="a8" source="t4" target="p1"/>

    <!-- EXPANDING BRANCH A -->
    <arc id="a9" source="p3"  target="t5"/>
    <arc id="a10" source="t5" target="p5"/>

    <arc id="a11" source="p5"  target="t6"/>
    <arc id="a12" source="t6" target="p6"/>

    <arc id="a13" source="p6"  target="t7"/>
    <arc id="a14" source="t7" target="p7"/>

    <arc id="a15" source="p7"  target="t8"/>
    <arc id="a16" source="t8" target="p8"/>

    <!-- EXPANDING BRANCH B -->
    <arc id="a17" source="p4"  target="t9"/>
    <arc id="a18" source="t9" target="p9"/>

    <arc id="a19" source="p9"  target="t10"/>
    <arc id="a20" source="t10" target="p10"/>

    <arc id="a21" source="p10" target="t11"/>
    <arc id="a22" source="t11" target="p11"/>

    <arc id="a23" source="p11" target="t12"/>
    <arc id="a24" source="t12" target="p12"/>

    <!-- MERGE back into loop -->
    <arc id="a25" source="p7" target="t2"/>
    <arc id="a26" source="p12" target="t3"/>

    <!-- EXTRA BRANCHES (makes gigantic state space) -->
    <arc id="a27" source="p5"  target="t13"/>
    <arc id="a28" source="t13" target="p13"/>

    <arc id="a29" source="p13" target="t14"/>
    <arc id="a30" source="t14" target="p14"/>

    <arc id="a31" source="p14" target="t15"/>
    <arc id="a32" source="t15" target="p15"/>

    <arc id="a33" source="p8"  target="t16"/>
    <arc id="a34" source="t16" target="p16"/>

    <arc id="a35" source="p16" target="t17"/>
    <arc id="a36" source="t17" target="p17"/>

    <!-- RETURN paths create massive combinations -->
    <arc id="a37" source="p15" target="t1"/>
    <arc id="a38" source="p17" target="t4"/>
    <arc id="a39" source="p13" target="t6"/>
    <arc id="a40" source="p11" target="t7"/>

    <!-- DEADLOCK -->
    <arc id="a41" source="p17" target="t_dead"/>
    <arc id="a42" source="t_dead" target="p_dead"/>
    <!-- p_dead has no outgoing arcs -->

  </net>
</pnml>
